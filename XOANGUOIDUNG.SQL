CONN SYS/123@//LOCALHOST:1523/ORCLDOCKER  AS  SYSDBA; 

ALTER SESSION SET CURRENT_SCHEMA = QL_NHANSU ; 
DECLARE
    CURSOR CUR IS (
        SELECT MANV
        FROM NHANVIEN
        WHERE MANV IN (
            SELECT USERNAME
            FROM ALL_USERS
        )
    );
    STRSQL VARCHAR(2000);
    USR    VARCHAR2(5);
BEGIN
    OPEN CUR; 
    STRSQL := 'ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE';
    EXECUTE IMMEDIATE(STRSQL);
    LOOP
        FETCH CUR INTO USR;
        EXIT WHEN CUR%NOTFOUND;
        STRSQL := 'DROP USER ' || USR;
        EXECUTE IMMEDIATE(STRSQL);
    END LOOP;
    STRSQL := 'ALTER SESSION SET "_ORACLE_SCRIPT" = FALSE ';
    EXECUTE IMMEDIATE(STRSQL);
    COMMIT;
    CLOSE CUR;
END;
/